language: android
sudo: false
jdk:
- oraclejdk8 #lambda表达式支持,如果工程中使用了rxJava等类库时添加
sudo: false
git:
  depth: 3 #将git depth设置相对小的值,加快构建速度
android:
  components:
  - tools
  - build-tools-25.0.2
  - android-25
  - extra-android-m2repository
  - extra-android-support
script:
- "./gradlew assembleRelease"
before_install:
- chmod +x gradlew
deploy:
  provider: releases
  api_key:
    secure: 35e29045a680fda9e5318f5aadfaafc7ad0a9c3e
  file: app/build/outputs/apk/app-release.apk
  skip_cleanup: true
  on:
    repo: privatez/AppBuilder
after_deploy:
- fir login 98319f387b364dde5d06b5e4c6fb0d69 #fir账号的Token
- fir me #打印身份信息,验证是否登录成功
- fir p app/build/outputs/apk/app-release.apk #自动发布应用至fir内测平台